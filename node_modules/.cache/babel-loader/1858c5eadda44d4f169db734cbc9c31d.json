{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport CaretDownOutlined from \"@ant-design/icons/es/icons/CaretDownOutlined\";\nimport CaretUpOutlined from \"@ant-design/icons/es/icons/CaretUpOutlined\";\nimport classNames from 'classnames';\nimport KeyCode from \"rc-util/es/KeyCode\";\nimport * as React from 'react';\nimport Tooltip from '../../tooltip';\nimport { getColumnKey, getColumnPos, renderColumnTitle } from '../util';\nvar ASCEND = 'ascend';\nvar DESCEND = 'descend';\n\nfunction getMultiplePriority(column) {\n  if (_typeof(column.sorter) === 'object' && typeof column.sorter.multiple === 'number') {\n    return column.sorter.multiple;\n  }\n\n  return false;\n}\n\nfunction getSortFunction(sorter) {\n  if (typeof sorter === 'function') {\n    return sorter;\n  }\n\n  if (sorter && _typeof(sorter) === 'object' && sorter.compare) {\n    return sorter.compare;\n  }\n\n  return false;\n}\n\nfunction nextSortDirection(sortDirections, current) {\n  if (!current) {\n    return sortDirections[0];\n  }\n\n  return sortDirections[sortDirections.indexOf(current) + 1];\n}\n\nfunction collectSortStates(columns, init, pos) {\n  var sortStates = [];\n\n  function pushState(column, columnPos) {\n    sortStates.push({\n      column: column,\n      key: getColumnKey(column, columnPos),\n      multiplePriority: getMultiplePriority(column),\n      sortOrder: column.sortOrder\n    });\n  }\n\n  (columns || []).forEach(function (column, index) {\n    var columnPos = getColumnPos(index, pos);\n\n    if (column.children) {\n      if ('sortOrder' in column) {\n        // Controlled\n        pushState(column, columnPos);\n      }\n\n      sortStates = [].concat(_toConsumableArray(sortStates), _toConsumableArray(collectSortStates(column.children, init, columnPos)));\n    } else if (column.sorter) {\n      if ('sortOrder' in column) {\n        // Controlled\n        pushState(column, columnPos);\n      } else if (init && column.defaultSortOrder) {\n        // Default sorter\n        sortStates.push({\n          column: column,\n          key: getColumnKey(column, columnPos),\n          multiplePriority: getMultiplePriority(column),\n          sortOrder: column.defaultSortOrder\n        });\n      }\n    }\n  });\n  return sortStates;\n}\n\nfunction injectSorter(prefixCls, columns, sorterStates, triggerSorter, defaultSortDirections, tableLocale, tableShowSorterTooltip, pos) {\n  return (columns || []).map(function (column, index) {\n    var columnPos = getColumnPos(index, pos);\n    var newColumn = column;\n\n    if (newColumn.sorter) {\n      var sortDirections = newColumn.sortDirections || defaultSortDirections;\n      var showSorterTooltip = newColumn.showSorterTooltip === undefined ? tableShowSorterTooltip : newColumn.showSorterTooltip;\n      var columnKey = getColumnKey(newColumn, columnPos);\n      var sorterState = sorterStates.find(function (_ref) {\n        var key = _ref.key;\n        return key === columnKey;\n      });\n      var sorterOrder = sorterState ? sorterState.sortOrder : null;\n      var nextSortOrder = nextSortDirection(sortDirections, sorterOrder);\n      var upNode = sortDirections.includes(ASCEND) && /*#__PURE__*/React.createElement(CaretUpOutlined, {\n        className: classNames(\"\".concat(prefixCls, \"-column-sorter-up\"), {\n          active: sorterOrder === ASCEND\n        }),\n        role: \"presentation\"\n      });\n      var downNode = sortDirections.includes(DESCEND) && /*#__PURE__*/React.createElement(CaretDownOutlined, {\n        className: classNames(\"\".concat(prefixCls, \"-column-sorter-down\"), {\n          active: sorterOrder === DESCEND\n        }),\n        role: \"presentation\"\n      });\n\n      var _ref2 = tableLocale || {},\n          cancelSort = _ref2.cancelSort,\n          triggerAsc = _ref2.triggerAsc,\n          triggerDesc = _ref2.triggerDesc;\n\n      var sortTip = cancelSort;\n\n      if (nextSortOrder === DESCEND) {\n        sortTip = triggerDesc;\n      } else if (nextSortOrder === ASCEND) {\n        sortTip = triggerAsc;\n      }\n\n      var tooltipProps = _typeof(showSorterTooltip) === 'object' ? showSorterTooltip : {\n        title: sortTip\n      };\n      newColumn = _extends(_extends({}, newColumn), {\n        className: classNames(newColumn.className, _defineProperty({}, \"\".concat(prefixCls, \"-column-sort\"), sorterOrder)),\n        title: function title(renderProps) {\n          var renderSortTitle = /*#__PURE__*/React.createElement(\"div\", {\n            className: \"\".concat(prefixCls, \"-column-sorters\")\n          }, /*#__PURE__*/React.createElement(\"span\", {\n            className: \"\".concat(prefixCls, \"-column-title\")\n          }, renderColumnTitle(column.title, renderProps)), /*#__PURE__*/React.createElement(\"span\", {\n            className: classNames(\"\".concat(prefixCls, \"-column-sorter\"), _defineProperty({}, \"\".concat(prefixCls, \"-column-sorter-full\"), !!(upNode && downNode)))\n          }, /*#__PURE__*/React.createElement(\"span\", {\n            className: \"\".concat(prefixCls, \"-column-sorter-inner\")\n          }, upNode, downNode)));\n          return showSorterTooltip ? /*#__PURE__*/React.createElement(Tooltip, _extends({}, tooltipProps), renderSortTitle) : renderSortTitle;\n        },\n        onHeaderCell: function onHeaderCell(col) {\n          var cell = column.onHeaderCell && column.onHeaderCell(col) || {};\n          var originOnClick = cell.onClick;\n          var originOKeyDown = cell.onKeyDown;\n\n          cell.onClick = function (event) {\n            triggerSorter({\n              column: column,\n              key: columnKey,\n              sortOrder: nextSortOrder,\n              multiplePriority: getMultiplePriority(column)\n            });\n            originOnClick === null || originOnClick === void 0 ? void 0 : originOnClick(event);\n          };\n\n          cell.onKeyDown = function (event) {\n            if (event.keyCode === KeyCode.ENTER) {\n              triggerSorter({\n                column: column,\n                key: columnKey,\n                sortOrder: nextSortOrder,\n                multiplePriority: getMultiplePriority(column)\n              });\n              originOKeyDown === null || originOKeyDown === void 0 ? void 0 : originOKeyDown(event);\n            }\n          }; // Inform the screen-reader so it can tell the visually impaired user which column is sorted\n\n\n          if (sorterOrder) {\n            if (sorterOrder === 'ascend') {\n              cell['aria-sort'] = 'ascending';\n            } else {\n              cell['aria-sort'] = 'descending';\n            }\n          } else {\n            cell['aria-label'] = \"\".concat(renderColumnTitle(column.title, {}), \" sortable\");\n          }\n\n          cell.className = classNames(cell.className, \"\".concat(prefixCls, \"-column-has-sorters\"));\n          cell.tabIndex = 0;\n          return cell;\n        }\n      });\n    }\n\n    if ('children' in newColumn) {\n      newColumn = _extends(_extends({}, newColumn), {\n        children: injectSorter(prefixCls, newColumn.children, sorterStates, triggerSorter, defaultSortDirections, tableLocale, tableShowSorterTooltip, columnPos)\n      });\n    }\n\n    return newColumn;\n  });\n}\n\nfunction stateToInfo(sorterStates) {\n  var column = sorterStates.column,\n      sortOrder = sorterStates.sortOrder;\n  return {\n    column: column,\n    order: sortOrder,\n    field: column.dataIndex,\n    columnKey: column.key\n  };\n}\n\nfunction generateSorterInfo(sorterStates) {\n  var list = sorterStates.filter(function (_ref3) {\n    var sortOrder = _ref3.sortOrder;\n    return sortOrder;\n  }).map(stateToInfo); // =========== Legacy compatible support ===========\n  // https://github.com/ant-design/ant-design/pull/19226\n\n  if (list.length === 0 && sorterStates.length) {\n    return _extends(_extends({}, stateToInfo(sorterStates[sorterStates.length - 1])), {\n      column: undefined\n    });\n  }\n\n  if (list.length <= 1) {\n    return list[0] || {};\n  }\n\n  return list;\n}\n\nexport function getSortData(data, sortStates, childrenColumnName) {\n  var innerSorterStates = sortStates.slice().sort(function (a, b) {\n    return b.multiplePriority - a.multiplePriority;\n  });\n  var cloneData = data.slice();\n  var runningSorters = innerSorterStates.filter(function (_ref4) {\n    var sorter = _ref4.column.sorter,\n        sortOrder = _ref4.sortOrder;\n    return getSortFunction(sorter) && sortOrder;\n  }); // Skip if no sorter needed\n\n  if (!runningSorters.length) {\n    return cloneData;\n  }\n\n  return cloneData.sort(function (record1, record2) {\n    for (var i = 0; i < runningSorters.length; i += 1) {\n      var sorterState = runningSorters[i];\n      var sorter = sorterState.column.sorter,\n          sortOrder = sorterState.sortOrder;\n      var compareFn = getSortFunction(sorter);\n\n      if (compareFn && sortOrder) {\n        var compareResult = compareFn(record1, record2, sortOrder);\n\n        if (compareResult !== 0) {\n          return sortOrder === ASCEND ? compareResult : -compareResult;\n        }\n      }\n    }\n\n    return 0;\n  }).map(function (record) {\n    var subRecords = record[childrenColumnName];\n\n    if (subRecords) {\n      return _extends(_extends({}, record), _defineProperty({}, childrenColumnName, getSortData(subRecords, sortStates, childrenColumnName)));\n    }\n\n    return record;\n  });\n}\nexport default function useFilterSorter(_ref5) {\n  var prefixCls = _ref5.prefixCls,\n      mergedColumns = _ref5.mergedColumns,\n      onSorterChange = _ref5.onSorterChange,\n      sortDirections = _ref5.sortDirections,\n      tableLocale = _ref5.tableLocale,\n      showSorterTooltip = _ref5.showSorterTooltip;\n\n  var _React$useState = React.useState(collectSortStates(mergedColumns, true)),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      sortStates = _React$useState2[0],\n      setSortStates = _React$useState2[1];\n\n  var mergedSorterStates = React.useMemo(function () {\n    var validate = true;\n    var collectedStates = collectSortStates(mergedColumns, false); // Return if not controlled\n\n    if (!collectedStates.length) {\n      return sortStates;\n    }\n\n    var validateStates = [];\n\n    function patchStates(state) {\n      if (validate) {\n        validateStates.push(state);\n      } else {\n        validateStates.push(_extends(_extends({}, state), {\n          sortOrder: null\n        }));\n      }\n    }\n\n    var multipleMode = null;\n    collectedStates.forEach(function (state) {\n      if (multipleMode === null) {\n        patchStates(state);\n\n        if (state.sortOrder) {\n          if (state.multiplePriority === false) {\n            validate = false;\n          } else {\n            multipleMode = true;\n          }\n        }\n      } else if (multipleMode && state.multiplePriority !== false) {\n        patchStates(state);\n      } else {\n        validate = false;\n        patchStates(state);\n      }\n    });\n    return validateStates;\n  }, [mergedColumns, sortStates]); // Get render columns title required props\n\n  var columnTitleSorterProps = React.useMemo(function () {\n    var sortColumns = mergedSorterStates.map(function (_ref6) {\n      var column = _ref6.column,\n          sortOrder = _ref6.sortOrder;\n      return {\n        column: column,\n        order: sortOrder\n      };\n    });\n    return {\n      sortColumns: sortColumns,\n      // Legacy\n      sortColumn: sortColumns[0] && sortColumns[0].column,\n      sortOrder: sortColumns[0] && sortColumns[0].order\n    };\n  }, [mergedSorterStates]);\n\n  function triggerSorter(sortState) {\n    var newSorterStates;\n\n    if (sortState.multiplePriority === false || !mergedSorterStates.length || mergedSorterStates[0].multiplePriority === false) {\n      newSorterStates = [sortState];\n    } else {\n      newSorterStates = [].concat(_toConsumableArray(mergedSorterStates.filter(function (_ref7) {\n        var key = _ref7.key;\n        return key !== sortState.key;\n      })), [sortState]);\n    }\n\n    setSortStates(newSorterStates);\n    onSorterChange(generateSorterInfo(newSorterStates), newSorterStates);\n  }\n\n  var transformColumns = function transformColumns(innerColumns) {\n    return injectSorter(prefixCls, innerColumns, mergedSorterStates, triggerSorter, sortDirections, tableLocale, showSorterTooltip);\n  };\n\n  var getSorters = function getSorters() {\n    return generateSorterInfo(mergedSorterStates);\n  };\n\n  return [transformColumns, mergedSorterStates, columnTitleSorterProps, getSorters];\n}","map":{"version":3,"sources":["/Users/nelson.lin/nelson-test/TaskList/node_modules/antd/es/table/hooks/useSorter.js"],"names":["_slicedToArray","_defineProperty","_extends","_toConsumableArray","_typeof","CaretDownOutlined","CaretUpOutlined","classNames","KeyCode","React","Tooltip","getColumnKey","getColumnPos","renderColumnTitle","ASCEND","DESCEND","getMultiplePriority","column","sorter","multiple","getSortFunction","compare","nextSortDirection","sortDirections","current","indexOf","collectSortStates","columns","init","pos","sortStates","pushState","columnPos","push","key","multiplePriority","sortOrder","forEach","index","children","concat","defaultSortOrder","injectSorter","prefixCls","sorterStates","triggerSorter","defaultSortDirections","tableLocale","tableShowSorterTooltip","map","newColumn","showSorterTooltip","undefined","columnKey","sorterState","find","_ref","sorterOrder","nextSortOrder","upNode","includes","createElement","className","active","role","downNode","_ref2","cancelSort","triggerAsc","triggerDesc","sortTip","tooltipProps","title","renderProps","renderSortTitle","onHeaderCell","col","cell","originOnClick","onClick","originOKeyDown","onKeyDown","event","keyCode","ENTER","tabIndex","stateToInfo","order","field","dataIndex","generateSorterInfo","list","filter","_ref3","length","getSortData","data","childrenColumnName","innerSorterStates","slice","sort","a","b","cloneData","runningSorters","_ref4","record1","record2","i","compareFn","compareResult","record","subRecords","useFilterSorter","_ref5","mergedColumns","onSorterChange","_React$useState","useState","_React$useState2","setSortStates","mergedSorterStates","useMemo","validate","collectedStates","validateStates","patchStates","state","multipleMode","columnTitleSorterProps","sortColumns","_ref6","sortColumn","sortState","newSorterStates","_ref7","transformColumns","innerColumns","getSorters"],"mappings":"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","sourcesContent":["import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport CaretDownOutlined from \"@ant-design/icons/es/icons/CaretDownOutlined\";\nimport CaretUpOutlined from \"@ant-design/icons/es/icons/CaretUpOutlined\";\nimport classNames from 'classnames';\nimport KeyCode from \"rc-util/es/KeyCode\";\nimport * as React from 'react';\nimport Tooltip from '../../tooltip';\nimport { getColumnKey, getColumnPos, renderColumnTitle } from '../util';\nvar ASCEND = 'ascend';\nvar DESCEND = 'descend';\n\nfunction getMultiplePriority(column) {\n  if (_typeof(column.sorter) === 'object' && typeof column.sorter.multiple === 'number') {\n    return column.sorter.multiple;\n  }\n\n  return false;\n}\n\nfunction getSortFunction(sorter) {\n  if (typeof sorter === 'function') {\n    return sorter;\n  }\n\n  if (sorter && _typeof(sorter) === 'object' && sorter.compare) {\n    return sorter.compare;\n  }\n\n  return false;\n}\n\nfunction nextSortDirection(sortDirections, current) {\n  if (!current) {\n    return sortDirections[0];\n  }\n\n  return sortDirections[sortDirections.indexOf(current) + 1];\n}\n\nfunction collectSortStates(columns, init, pos) {\n  var sortStates = [];\n\n  function pushState(column, columnPos) {\n    sortStates.push({\n      column: column,\n      key: getColumnKey(column, columnPos),\n      multiplePriority: getMultiplePriority(column),\n      sortOrder: column.sortOrder\n    });\n  }\n\n  (columns || []).forEach(function (column, index) {\n    var columnPos = getColumnPos(index, pos);\n\n    if (column.children) {\n      if ('sortOrder' in column) {\n        // Controlled\n        pushState(column, columnPos);\n      }\n\n      sortStates = [].concat(_toConsumableArray(sortStates), _toConsumableArray(collectSortStates(column.children, init, columnPos)));\n    } else if (column.sorter) {\n      if ('sortOrder' in column) {\n        // Controlled\n        pushState(column, columnPos);\n      } else if (init && column.defaultSortOrder) {\n        // Default sorter\n        sortStates.push({\n          column: column,\n          key: getColumnKey(column, columnPos),\n          multiplePriority: getMultiplePriority(column),\n          sortOrder: column.defaultSortOrder\n        });\n      }\n    }\n  });\n  return sortStates;\n}\n\nfunction injectSorter(prefixCls, columns, sorterStates, triggerSorter, defaultSortDirections, tableLocale, tableShowSorterTooltip, pos) {\n  return (columns || []).map(function (column, index) {\n    var columnPos = getColumnPos(index, pos);\n    var newColumn = column;\n\n    if (newColumn.sorter) {\n      var sortDirections = newColumn.sortDirections || defaultSortDirections;\n      var showSorterTooltip = newColumn.showSorterTooltip === undefined ? tableShowSorterTooltip : newColumn.showSorterTooltip;\n      var columnKey = getColumnKey(newColumn, columnPos);\n      var sorterState = sorterStates.find(function (_ref) {\n        var key = _ref.key;\n        return key === columnKey;\n      });\n      var sorterOrder = sorterState ? sorterState.sortOrder : null;\n      var nextSortOrder = nextSortDirection(sortDirections, sorterOrder);\n      var upNode = sortDirections.includes(ASCEND) && /*#__PURE__*/React.createElement(CaretUpOutlined, {\n        className: classNames(\"\".concat(prefixCls, \"-column-sorter-up\"), {\n          active: sorterOrder === ASCEND\n        }),\n        role: \"presentation\"\n      });\n      var downNode = sortDirections.includes(DESCEND) && /*#__PURE__*/React.createElement(CaretDownOutlined, {\n        className: classNames(\"\".concat(prefixCls, \"-column-sorter-down\"), {\n          active: sorterOrder === DESCEND\n        }),\n        role: \"presentation\"\n      });\n\n      var _ref2 = tableLocale || {},\n          cancelSort = _ref2.cancelSort,\n          triggerAsc = _ref2.triggerAsc,\n          triggerDesc = _ref2.triggerDesc;\n\n      var sortTip = cancelSort;\n\n      if (nextSortOrder === DESCEND) {\n        sortTip = triggerDesc;\n      } else if (nextSortOrder === ASCEND) {\n        sortTip = triggerAsc;\n      }\n\n      var tooltipProps = _typeof(showSorterTooltip) === 'object' ? showSorterTooltip : {\n        title: sortTip\n      };\n      newColumn = _extends(_extends({}, newColumn), {\n        className: classNames(newColumn.className, _defineProperty({}, \"\".concat(prefixCls, \"-column-sort\"), sorterOrder)),\n        title: function title(renderProps) {\n          var renderSortTitle = /*#__PURE__*/React.createElement(\"div\", {\n            className: \"\".concat(prefixCls, \"-column-sorters\")\n          }, /*#__PURE__*/React.createElement(\"span\", {\n            className: \"\".concat(prefixCls, \"-column-title\")\n          }, renderColumnTitle(column.title, renderProps)), /*#__PURE__*/React.createElement(\"span\", {\n            className: classNames(\"\".concat(prefixCls, \"-column-sorter\"), _defineProperty({}, \"\".concat(prefixCls, \"-column-sorter-full\"), !!(upNode && downNode)))\n          }, /*#__PURE__*/React.createElement(\"span\", {\n            className: \"\".concat(prefixCls, \"-column-sorter-inner\")\n          }, upNode, downNode)));\n          return showSorterTooltip ? /*#__PURE__*/React.createElement(Tooltip, _extends({}, tooltipProps), renderSortTitle) : renderSortTitle;\n        },\n        onHeaderCell: function onHeaderCell(col) {\n          var cell = column.onHeaderCell && column.onHeaderCell(col) || {};\n          var originOnClick = cell.onClick;\n          var originOKeyDown = cell.onKeyDown;\n\n          cell.onClick = function (event) {\n            triggerSorter({\n              column: column,\n              key: columnKey,\n              sortOrder: nextSortOrder,\n              multiplePriority: getMultiplePriority(column)\n            });\n            originOnClick === null || originOnClick === void 0 ? void 0 : originOnClick(event);\n          };\n\n          cell.onKeyDown = function (event) {\n            if (event.keyCode === KeyCode.ENTER) {\n              triggerSorter({\n                column: column,\n                key: columnKey,\n                sortOrder: nextSortOrder,\n                multiplePriority: getMultiplePriority(column)\n              });\n              originOKeyDown === null || originOKeyDown === void 0 ? void 0 : originOKeyDown(event);\n            }\n          }; // Inform the screen-reader so it can tell the visually impaired user which column is sorted\n\n\n          if (sorterOrder) {\n            if (sorterOrder === 'ascend') {\n              cell['aria-sort'] = 'ascending';\n            } else {\n              cell['aria-sort'] = 'descending';\n            }\n          } else {\n            cell['aria-label'] = \"\".concat(renderColumnTitle(column.title, {}), \" sortable\");\n          }\n\n          cell.className = classNames(cell.className, \"\".concat(prefixCls, \"-column-has-sorters\"));\n          cell.tabIndex = 0;\n          return cell;\n        }\n      });\n    }\n\n    if ('children' in newColumn) {\n      newColumn = _extends(_extends({}, newColumn), {\n        children: injectSorter(prefixCls, newColumn.children, sorterStates, triggerSorter, defaultSortDirections, tableLocale, tableShowSorterTooltip, columnPos)\n      });\n    }\n\n    return newColumn;\n  });\n}\n\nfunction stateToInfo(sorterStates) {\n  var column = sorterStates.column,\n      sortOrder = sorterStates.sortOrder;\n  return {\n    column: column,\n    order: sortOrder,\n    field: column.dataIndex,\n    columnKey: column.key\n  };\n}\n\nfunction generateSorterInfo(sorterStates) {\n  var list = sorterStates.filter(function (_ref3) {\n    var sortOrder = _ref3.sortOrder;\n    return sortOrder;\n  }).map(stateToInfo); // =========== Legacy compatible support ===========\n  // https://github.com/ant-design/ant-design/pull/19226\n\n  if (list.length === 0 && sorterStates.length) {\n    return _extends(_extends({}, stateToInfo(sorterStates[sorterStates.length - 1])), {\n      column: undefined\n    });\n  }\n\n  if (list.length <= 1) {\n    return list[0] || {};\n  }\n\n  return list;\n}\n\nexport function getSortData(data, sortStates, childrenColumnName) {\n  var innerSorterStates = sortStates.slice().sort(function (a, b) {\n    return b.multiplePriority - a.multiplePriority;\n  });\n  var cloneData = data.slice();\n  var runningSorters = innerSorterStates.filter(function (_ref4) {\n    var sorter = _ref4.column.sorter,\n        sortOrder = _ref4.sortOrder;\n    return getSortFunction(sorter) && sortOrder;\n  }); // Skip if no sorter needed\n\n  if (!runningSorters.length) {\n    return cloneData;\n  }\n\n  return cloneData.sort(function (record1, record2) {\n    for (var i = 0; i < runningSorters.length; i += 1) {\n      var sorterState = runningSorters[i];\n      var sorter = sorterState.column.sorter,\n          sortOrder = sorterState.sortOrder;\n      var compareFn = getSortFunction(sorter);\n\n      if (compareFn && sortOrder) {\n        var compareResult = compareFn(record1, record2, sortOrder);\n\n        if (compareResult !== 0) {\n          return sortOrder === ASCEND ? compareResult : -compareResult;\n        }\n      }\n    }\n\n    return 0;\n  }).map(function (record) {\n    var subRecords = record[childrenColumnName];\n\n    if (subRecords) {\n      return _extends(_extends({}, record), _defineProperty({}, childrenColumnName, getSortData(subRecords, sortStates, childrenColumnName)));\n    }\n\n    return record;\n  });\n}\nexport default function useFilterSorter(_ref5) {\n  var prefixCls = _ref5.prefixCls,\n      mergedColumns = _ref5.mergedColumns,\n      onSorterChange = _ref5.onSorterChange,\n      sortDirections = _ref5.sortDirections,\n      tableLocale = _ref5.tableLocale,\n      showSorterTooltip = _ref5.showSorterTooltip;\n\n  var _React$useState = React.useState(collectSortStates(mergedColumns, true)),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      sortStates = _React$useState2[0],\n      setSortStates = _React$useState2[1];\n\n  var mergedSorterStates = React.useMemo(function () {\n    var validate = true;\n    var collectedStates = collectSortStates(mergedColumns, false); // Return if not controlled\n\n    if (!collectedStates.length) {\n      return sortStates;\n    }\n\n    var validateStates = [];\n\n    function patchStates(state) {\n      if (validate) {\n        validateStates.push(state);\n      } else {\n        validateStates.push(_extends(_extends({}, state), {\n          sortOrder: null\n        }));\n      }\n    }\n\n    var multipleMode = null;\n    collectedStates.forEach(function (state) {\n      if (multipleMode === null) {\n        patchStates(state);\n\n        if (state.sortOrder) {\n          if (state.multiplePriority === false) {\n            validate = false;\n          } else {\n            multipleMode = true;\n          }\n        }\n      } else if (multipleMode && state.multiplePriority !== false) {\n        patchStates(state);\n      } else {\n        validate = false;\n        patchStates(state);\n      }\n    });\n    return validateStates;\n  }, [mergedColumns, sortStates]); // Get render columns title required props\n\n  var columnTitleSorterProps = React.useMemo(function () {\n    var sortColumns = mergedSorterStates.map(function (_ref6) {\n      var column = _ref6.column,\n          sortOrder = _ref6.sortOrder;\n      return {\n        column: column,\n        order: sortOrder\n      };\n    });\n    return {\n      sortColumns: sortColumns,\n      // Legacy\n      sortColumn: sortColumns[0] && sortColumns[0].column,\n      sortOrder: sortColumns[0] && sortColumns[0].order\n    };\n  }, [mergedSorterStates]);\n\n  function triggerSorter(sortState) {\n    var newSorterStates;\n\n    if (sortState.multiplePriority === false || !mergedSorterStates.length || mergedSorterStates[0].multiplePriority === false) {\n      newSorterStates = [sortState];\n    } else {\n      newSorterStates = [].concat(_toConsumableArray(mergedSorterStates.filter(function (_ref7) {\n        var key = _ref7.key;\n        return key !== sortState.key;\n      })), [sortState]);\n    }\n\n    setSortStates(newSorterStates);\n    onSorterChange(generateSorterInfo(newSorterStates), newSorterStates);\n  }\n\n  var transformColumns = function transformColumns(innerColumns) {\n    return injectSorter(prefixCls, innerColumns, mergedSorterStates, triggerSorter, sortDirections, tableLocale, showSorterTooltip);\n  };\n\n  var getSorters = function getSorters() {\n    return generateSorterInfo(mergedSorterStates);\n  };\n\n  return [transformColumns, mergedSorterStates, columnTitleSorterProps, getSorters];\n}"]},"metadata":{},"sourceType":"module"}